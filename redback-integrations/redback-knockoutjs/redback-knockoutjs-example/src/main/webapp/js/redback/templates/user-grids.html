<script id='ko_usersGrid_grid' type='text/x-jquery-tmpl'>
  <thead>
      <tr>
          {{each(i, columnDefinition) columns}}
              <th>${ columnDefinition.headerText }</th>
          {{/each}}
          <th>Edit</th>
          <th>Delete</th>
          <th>Locked</th>
          <th>Change password required</th>
      </tr>
  </thead>
  <tbody>
      {{each(i, row) itemsOnCurrentPage()}}
          <tr>
              {{each(j, columnDefinition) columns}}
              <td>${ typeof columnDefinition.rowText == 'function' ? columnDefinition.rowText(row) : row[columnDefinition.rowText] }</td>
              {{/each}}
              <td><a href="#" data-bind="click: function(){ window.redbackModel.usersViewModel.editUserBox(row) }">Edit</a></td>
              {{if row.username()=="admin" || row.username()=="guest"}}
                <td></td>
              {{else}}
                <td>
                  <a href="#" data-bind="click: function(){ row.deleteUser() }">
                    <img src="images/delete.png" alt="Delete"/>
                  </a>
                </td>
              {{/if}}
              {{if row.locked()==true}}
                <td>
                    {{if row.username()=="admin" || row.username()=="guest"}}
                      <img src="images/system-lock-screen.png"/>
                    {{else}}
                      <a href="#" data-bind="click: function(){ window.redbackModel.usersViewModel.unlock(row) }"><img src="images/system-lock-screen.png"/></a>
                    {{/if}}
                </td>
              {{else}}
                <td>
                    {{if row.username()=="admin" || row.username()=="guest"}}
                      <img src="images/weather-clear.png"/>
                    {{else}}
                      <a href="#" data-bind="click: function(){ window.redbackModel.usersViewModel.lock(row) }"><img src="images/weather-clear.png"/></a>
                    {{/if}}
                </td>
              {{/if}}

              {{if row.passwordChangeRequired()==true}}
                <td>
                    {{if row.username()=="admin" || row.username()=="guest"}}
                      <img src="images/dialog-error.png"/>
                    {{else}}
                      <a href="#" data-bind="click: function(){ window.redbackModel.usersViewModel.passwordChangeRequire(row,false) }">
                          <img src="images/dialog-error.png"/>
                      </a>
                    {{/if}}
                </td>
              {{else}}
              <td>
                  {{if row.username()=="admin" || row.username()=="guest"}}
                    <img src="images/weather-clear.png"/>
                  {{else}}
                    <a href="#" data-bind="click: function(){ window.redbackModel.usersViewModel.passwordChangeRequire(row,true) }">
                        <img src="images/weather-clear.png"/>
                    </a>
                  {{/if}}
              </td>
              {{/if}}
          </tr>
      {{/each}}
  </tbody>
</script>

<script id="ko_usersGrid_pageLinks" type="text/x-jquery-tmpl">
  <div class="pagination">
      <ul>
      {{each(i) ko.utils.range(1, maxPageIndex)}}
          <li data-bind="css: { active: i == currentPageIndex() }">
            <a href="#" data-bind="click: function() { currentPageIndex(i) }">
              ${ i + 1 }
            </a>
          </li>
      {{/each}}
      </ul>
  </div>
</script>


<script id="usersGrid"  type="text/x-jquery-tmpl">
    <h2>Users list</h2>

    <button data-bind='click: addUser' class="btn">
        Add User
    </button>

    <button data-bind='click: sortByName'  class="btn">
        Sort by name
    </button>

    <div id="usersPagination"></div>

    <table class="bordered-table zebra-striped" data-bind="simpleGrid: gridViewModel" id="usersTable"></table>

    <div id="createUserForm"></div>
</script>
